---
id: PR-07
track: host
depends_on: [PR-03]
---
# PR-07: Provider registry abstraction in host (no WASM execution yet)

## Goal
Create a host-side registry that can hold provider instances (from gtpacks) and their capabilities, without wiring into message send paths yet.

## Changes
- Add `ProviderRegistry`:
  - `register_provider(id, version, caps_source, encoder_ref)`
  - `get_caps(provider_id) -> ProviderCapabilitiesV1`
- Add `CapsSource` enum:
  - `FromProviderCall`
  - `FromPackManifest`
  - `Override` (for tests/dev)
- Add unit tests

## Suggested location
- `crates/greentic-messaging-core/src/providers/registry.rs` (or similar)

## Acceptance criteria
- Registry can load caps from JSON
- Registry is used by tests (not runtime yet)
- No existing behavior change

## Notes
- This sets up the marketplace: providers can be added dynamically.
