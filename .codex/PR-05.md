---
id: PR-05
track: host
depends_on: [PR-04]
---
# PR-05: Implement Tier selection rules (A/B/D) driven ONLY by capabilities

## Goal
Make the planner choose a tier based on capabilities, without knowing any provider identities.

## Changes
- Planner chooses:
  - Tier A if `supports_adaptive_cards = true` AND card uses only supported elements
  - Tier B if adaptive cards supported but unsupported elements exist (reduce)
  - Tier D otherwise
- Add `RenderWarning` codes for downgrade reasons:
  - `unsupported_element`
  - `adaptive_cards_not_supported`
  - `images_not_supported`
  - etc.
- Expand golden tests for tier selection

## Acceptance criteria
- Golden tests cover:
  - A → stays A
  - A → downgrades to B due to unsupported element
  - A → downgrades to D if adaptive cards unsupported
- No provider branching, no channel-specific hacks

## Notes
- Unsupported element detection can be minimal at first (only a small set).
