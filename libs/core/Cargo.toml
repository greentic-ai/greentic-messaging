[package]
name = "gsm-core"
version.workspace = true
edition.workspace = true
description = "Core types and platform abstractions for the Greentic messaging runtime."
license.workspace = true

[features]
default = ["adaptive-cards"]
nats = ["dep:async-nats"]
directline_standalone = []
store_sqlite = ["dep:rusqlite"]
adaptive-cards = []
testkit = []
proptest = ["dep:proptest"]
component-host = ["dep:wasmtime"]
providers-bundle-tests = ["component-host"]
schemars = []

[[example]]
name = "wasmtime_host"
path = "examples/wasmtime_host.rs"
required-features = ["component-host"]

[dependencies]
serde = { workspace = true }
time = { workspace = true }
serde_json = { workspace = true }
serde_yaml_bw = { workspace = true }
anyhow = { workspace = true }
greentic-types = { workspace = true }
jsonschema = { workspace = true }
secrets-core = { workspace = true }
greentic-secrets = { workspace = true }
greentic-interfaces-host = { workspace = true }
greentic-interfaces-wasmtime = { workspace = true, optional = true }
async-trait = { workspace = true }
bytes = { workspace = true }
http = { workspace = true }
schemars = { workspace = true, features = ["derive"] }
dashmap = { workspace = true }
reqwest = { workspace = true }
jsonwebtoken = { workspace = true }
once_cell = { workspace = true }
regex = { workspace = true }
tracing = { workspace = true }
tokio = { workspace = true, features = ["sync", "time", "rt", "macros"] }
thiserror = { workspace = true }
uuid = { workspace = true }
async-nats = { workspace = true, optional = true }
metrics = { workspace = true }
axum = { workspace = true, features = ["macros", "json", "ws", "tokio"] }
rusqlite = { workspace = true, optional = true }
wasmtime = { version = "40", optional = true, features = ["component-model"] }
base64 = { workspace = true }
hmac = { workspace = true }
sha2 = { workspace = true }
urlencoding = { workspace = true }
gsm-telemetry = { workspace = true }
greentic-flow = { workspace = true }
greentic-pack-lib = { workspace = true }
zip = { workspace = true }
proptest = { version = "1", optional = true }

[dev-dependencies]
tokio = { workspace = true, features = ["macros", "rt", "test-util"] }
axum = { workspace = true }
tower = { workspace = true }
tower-http = { workspace = true, features = ["cors"] }
tracing-test = { workspace = true, features = ["no-env-filter"] }
tracing-appender = { workspace = true }
tracing-subscriber = { workspace = true }
serde_json = { workspace = true }
insta = { workspace = true, features = ["json"] }
greentic-flow = { workspace = true }
tempfile = { workspace = true }
semver = "1"
